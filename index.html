<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Weekly Meal Plan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Neutrals -->
    <!-- Application Structure Plan: A dashboard-style SPA with three main views toggled by navigation buttons: 'Weekly Plan', 'Batch Prep', and 'Recipes'. The 'Weekly Plan' view is the default, featuring interactive day cards. Clicking a day card updates a central dashboard with a donut chart showing the calorie distribution for that day and key stats (total calories/protein). Clicking a specific meal opens a modal with its recipe. This structure was chosen to align with user tasks: 1) See the weekly overview, 2) Drill down into a specific day's nutrition, 3) Look up prep instructions, 4) Find a specific recipe. It separates concerns, prevents information overload, and makes the plan an interactive tool rather than a static document. -->
    <!-- Visualization & Content Choices: 
        - Weekly Plan (Table) -> Goal: Overview -> Viz: Interactive Grid of Cards (HTML/Tailwind) -> Interaction: Click to update dashboard -> Justification: More engaging and scannable than a static table.
        - Daily Calorie Breakdown -> Goal: Compare meal proportions -> Viz: Donut Chart (Chart.js/Canvas) -> Interaction: Updates on day selection, tooltips on hover -> Justification: Best for showing parts-of-a-whole relationship for the day's total calories.
        - Daily Totals -> Goal: Inform key metrics -> Viz: Dynamic Stat Cards (HTML/Tailwind) -> Interaction: Updates on day selection -> Justification: Highlights the most important daily numbers for quick reference.
        - Batch Prep/Recipe Notes -> Goal: Instruct -> Viz: Accordion/Tabbed Text Blocks (HTML/Tailwind) -> Interaction: Click to show/hide content -> Justification: Keeps the main dashboard clean while making detailed instructions easily accessible.
        - Meal Details -> Goal: Detailed info on demand -> Viz: Modal Window (HTML/Tailwind) -> Interaction: Click a meal to open -> Justification: Provides deep information without cluttering the primary interface.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 350px;
            height: 350px;
            margin: auto;
        }
        .active-day {
            border-color: #F59E0B;
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .nav-button.active {
            background-color: #8D6E63;
            color: #FFFFFF;
        }
        .modal {
            display: none;
        }
        .modal.show {
            display: flex;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800">Your Weekly Meal Plan</h1>
            <p class="text-lg text-gray-600 mt-2">An interactive guide to your South Asian vegetarian diet.</p>
        </header>

        <nav class="flex justify-center space-x-2 sm:space-x-4 mb-8">
            <button id="nav-plan" class="nav-button px-4 py-2 rounded-full font-semibold bg-white text-gray-700 shadow-sm hover:bg-gray-100 transition-all duration-300">Weekly Plan</button>
            <button id="nav-prep" class="nav-button px-4 py-2 rounded-full font-semibold bg-white text-gray-700 shadow-sm hover:bg-gray-100 transition-all duration-300">Batch Prep</button>
            <button id="nav-recipes" class="nav-button px-4 py-2 rounded-full font-semibold bg-white text-gray-700 shadow-sm hover:bg-gray-100 transition-all duration-300">Recipes</button>
        </nav>

        <main id="main-content">
            <section id="plan-section">
                <div class="bg-white rounded-2xl shadow-lg p-6 lg:p-8">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="lg:col-span-1 flex flex-col items-center justify-center bg-amber-50 rounded-xl p-6">
                            <h2 id="dashboard-title" class="text-2xl font-bold text-gray-800 mb-4">Monday's Dashboard</h2>
                            <div class="chart-container">
                                <canvas id="calorieChart"></canvas>
                            </div>
                            <div class="grid grid-cols-2 gap-4 mt-6 text-center w-full max-w-sm">
                                <div class="bg-white p-4 rounded-lg shadow-md">
                                    <p class="text-sm font-medium text-gray-500">Total Calories</p>
                                    <p id="total-calories" class="text-2xl font-bold text-amber-600">0</p>
                                </div>
                                <div class="bg-white p-4 rounded-lg shadow-md">
                                    <p class="text-sm font-medium text-gray-500">Total Protein</p>
                                    <p id="total-protein" class="text-2xl font-bold text-amber-600">0g</p>
                                </div>
                            </div>
                        </div>

                        <div id="weekly-grid" class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
                        </div>
                    </div>
                </div>
            </section>

            <section id="prep-section" class="hidden bg-white rounded-2xl shadow-lg p-6 lg:p-8">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Batch Cooking & Prep Tips</h2>
                <div class="max-w-4xl mx-auto space-y-6 text-gray-700">
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Sunday Prep</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Cook a large pot of <span class="font-semibold">Mixed Vegetable Dal</span> (prepare 6 servings).</li>
                            <li>Cook a large pot of <span class="font-semibold">Chana Masala</span> (prepare 6 servings).</li>
                            <li>Chop vegetables for the <span class="font-semibold">Dry Vegetable Curry</span> (like carrots, beans, and bell peppers) and prepare enough for 2 servings.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Storage</h3>
                         <ul class="list-disc list-inside space-y-2">
                            <li><span class="font-semibold">Refrigerate:</span> Store pre-cooked meals in airtight containers in your fridge. They will be good for 3-4 days.</li>
                            <li><span class="font-semibold">Freeze:</span> The Rajma and Chana Masala can be frozen in individual portions for later weeks.</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-800">Daily Prep</h3>
                        <p>The yogurt-based meals and salads can be prepared fresh each morning. Cook your roti or rice as needed.</p>
                    </div>
                </div>
            </section>
            
            <section id="recipes-section" class="hidden bg-white rounded-2xl shadow-lg p-6 lg:p-8">
                 <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Recipe Notes</h2>
                 <div id="recipe-list" class="max-w-4xl mx-auto space-y-4">
                 </div>
            </section>
        </main>
    </div>

    <div id="meal-modal" class="modal fixed inset-0 bg-black bg-opacity-50 z-50 items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl w-full max-w-md mx-auto transform transition-all duration-300 scale-95 opacity-0">
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <h3 id="modal-title" class="text-2xl font-bold text-gray-800">Meal Details</h3>
                    <button id="modal-close" class="text-gray-400 hover:text-gray-600">&times;</button>
                </div>
                <div class="mt-4 text-gray-600 space-y-4">
                    <p id="modal-description"></p>
                    <div>
                        <h4 class="font-semibold text-gray-700">Nutrition (est.):</h4>
                        <p id="modal-nutrition"></p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-gray-700">Recipe Notes:</h4>
                        <p id="modal-recipe"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const mealData = {
            Monday: {
                meals: [
                    { name: 'Moong Dal Chilla', type: 'Breakfast', description: '2 small chillas (from 50g dry moong dal batter) with 1/2 cup (125g) plain yogurt.', calories: 250, protein: 15 },
                    { name: 'Chana Masala Bowl', type: 'Lunch', description: '1.5 cups chana masala with 1/2 cup (125g) plain yogurt.', calories: 420, protein: 20 },
                    { name: 'Mixed Vegetable Dal', type: 'Dinner', description: '1 cup dal with half a whole wheat roti.', calories: 280, protein: 12 },
                    { name: 'Roasted Almonds', type: 'Snack', description: '20g of roasted almonds.', calories: 120, protein: 5 }
                ]
            },
            Tuesday: {
                meals: [
                    { name: 'Yogurt Parfait', type: 'Breakfast', description: '1 cup (250g) Greek yogurt with 2 tbsp nuts and 1/2 cup mixed berries.', calories: 350, protein: 25 },
                    { name: 'Chana Masala Bowl', type: 'Lunch', description: '1.5 cups chana masala with 1/2 cup (125g) plain yogurt.', calories: 420, protein: 20 },
                    { name: 'Mixed Vegetable Dal', type: 'Dinner', description: '1 cup dal with half a whole wheat roti.', calories: 280, protein: 12 },
                    { name: 'Apple', type: 'Snack', description: 'One medium apple.', calories: 95, protein: 1 }
                ]
            },
            Wednesday: {
                meals: [
                    { name: 'Moong Dal Chilla', type: 'Breakfast', description: '2 small chillas with 1/2 cup plain yogurt.', calories: 250, protein: 15 },
                    { name: 'Rajma Chawal', type: 'Lunch', description: '1.5 cups rajma (kidney bean curry) with 1/2 cup cooked brown rice.', calories: 460, protein: 22 },
                    { name: 'Dry Vegetable Curry', type: 'Dinner', description: '1.5 cups mixed vegetable sabzi with half a whole wheat roti.', calories: 280, protein: 8 },
                    { name: 'Plain Yogurt', type: 'Snack', description: '3/4 cup of plain yogurt.', calories: 105, protein: 9 }
                ]
            },
            Thursday: {
                meals: [
                    { name: 'Yogurt Parfait', type: 'Breakfast', description: '1 cup (250g) Greek yogurt with 2 tbsp nuts and 1/2 cup mixed berries.', calories: 350, protein: 25 },
                    { name: 'Rajma Chawal', type: 'Lunch', description: '1.5 cups rajma with 1/2 cup cooked brown rice.', calories: 460, protein: 22 },
                    { name: 'Dry Vegetable Curry', type: 'Dinner', description: '1.5 cups mixed vegetable sabzi with half a whole wheat roti.', calories: 280, protein: 8 },
                    { name: 'Roasted Makhana', type: 'Snack', description: '1 cup of roasted makhana (fox nuts).', calories: 90, protein: 3 }
                ]
            },
            Friday: {
                meals: [
                    { name: 'Moong Dal Chilla', type: 'Breakfast', description: '2 small chillas with 1/2 cup plain yogurt.', calories: 250, protein: 15 },
                    { name: 'Paneer Bhurji', type: 'Lunch', description: '100g paneer stir-fried with vegetables.', calories: 400, protein: 25 },
                    { name: 'Veg & Lentil Soup', type: 'Dinner', description: '2 cups homemade soup with lentils and vegetables.', calories: 280, protein: 15 },
                    { name: 'Orange', type: 'Snack', description: 'One medium orange.', calories: 60, protein: 1 }
                ]
            },
            Saturday: {
                meals: [
                    { name: 'Yogurt Parfait', type: 'Breakfast', description: '1 cup (250g) Greek yogurt with 2 tbsp nuts and 1/2 cup mixed berries.', calories: 350, protein: 25 },
                    { name: 'Paneer Bhurji', type: 'Lunch', description: '100g paneer stir-fried with vegetables.', calories: 400, protein: 25 },
                    { name: 'Veg & Lentil Soup', type: 'Dinner', description: '2 cups homemade soup with lentils and vegetables.', calories: 280, protein: 15 },
                    { name: 'Roasted Almonds', type: 'Snack', description: '20g of roasted almonds.', calories: 120, protein: 5 }
                ]
            },
            Sunday: {
                meals: [
                    { name: 'Moong Dal Chilla', type: 'Breakfast', description: '2 small chillas with 1/2 cup plain yogurt.', calories: 250, protein: 15 },
                    { name: 'Chickpea Salad', type: 'Lunch', description: '1.5 cups chickpeas, chopped vegetables, and yogurt dressing.', calories: 400, protein: 18 },
                    { name: 'Leftovers', type: 'Dinner', description: 'Any leftover dish from the week.', calories: 350, protein: 15 },
                    { name: 'Plain Yogurt', type: 'Snack', description: '3/4 cup of plain yogurt.', calories: 105, protein: 9 }
                ]
            }
        };

        const recipeNotes = {
            'Moong Dal Chilla': 'Soak 1 cup of moong dal overnight. Blend with ginger, green chili, and a little water to form a batter. Add salt and turmeric. Cook on a non-stick pan like a dosa.',
            'Mixed Vegetable Dal': 'Use any combination of lentils (masoor, toor, chana) and cook with diced vegetables like carrots, peas, and spinach. Season with a simple tempering of cumin seeds, ginger, and asafoetida.',
            'Chana Masala Bowl': 'Use boiled chickpeas. Cook with a gravy of tomatoes, onions, ginger-garlic paste, and a blend of spices like cumin, coriander, and garam masala.',
            'Rajma Chawal': 'Follow a similar process to Chana Masala but with boiled kidney beans. Serve with brown rice.',
            'Dry Vegetable Curry': 'Stir-fry your choice of vegetables (carrots, beans, bell peppers) with a simple spice mix. Avoid adding too much oil.',
            'Yogurt Parfait': 'Use plain Greek yogurt for higher protein. Layer with your favorite nuts and berries. Avoid added sugar.',
            'Paneer Bhurji': 'Crumble paneer and stir-fry with finely chopped onions, tomatoes, and bell peppers with turmeric, chili powder, and garam masala.',
            'Veg & Lentil Soup': 'A hearty soup with a mix of lentils and vegetables, no cream. Simmer until vegetables are tender.',
            'Chickpea Salad': 'Combine boiled chickpeas with chopped cucumber, tomato, onion. Make a dressing from plain yogurt, lemon juice, and chaat masala.'
        };

        let calorieChart;
        let currentDay = 'Monday';

        const initChart = () => {
            const ctx = document.getElementById('calorieChart').getContext('2d');
            calorieChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        backgroundColor: ['#FBBF24', '#F97316', '#3B82F6', '#8B5CF6'],
                        borderColor: '#FDFBF8',
                        borderWidth: 4,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '60%',
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14,
                                    family: 'Inter'
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' kcal';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        };

        const updateDashboard = (day) => {
            currentDay = day;
            const dayData = mealData[day];
            const totalCalories = dayData.meals.reduce((sum, meal) => sum + meal.calories, 0);
            const totalProtein = dayData.meals.reduce((sum, meal) => sum + meal.protein, 0);

            document.getElementById('dashboard-title').textContent = `${day}'s Dashboard`;
            document.getElementById('total-calories').textContent = totalCalories;
            document.getElementById('total-protein').textContent = `${totalProtein}g`;

            calorieChart.data.labels = dayData.meals.map(meal => meal.type);
            calorieChart.data.datasets[0].data = dayData.meals.map(meal => meal.calories);
            calorieChart.update();
            
            document.querySelectorAll('.day-card').forEach(card => {
                card.classList.remove('active-day');
                if (card.dataset.day === day) {
                    card.classList.add('active-day');
                }
            });
        };
        
        const showMealModal = (mealName) => {
            const dayData = mealData[currentDay];
            const meal = dayData.meals.find(m => m.name === mealName);
            if (!meal) return;

            const modal = document.getElementById('meal-modal');
            const modalContent = modal.querySelector('.bg-white');

            document.getElementById('modal-title').textContent = meal.name;
            document.getElementById('modal-description').textContent = meal.description;
            document.getElementById('modal-nutrition').textContent = `Calories: ${meal.calories} kcal, Protein: ${meal.protein}g`;
            document.getElementById('modal-recipe').textContent = recipeNotes[meal.name] || 'No specific recipe notes for this item.';
            
            modal.style.display = 'flex';
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        };

        const hideMealModal = () => {
            const modal = document.getElementById('meal-modal');
            const modalContent = modal.querySelector('.bg-white');
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        };

        const renderWeeklyPlan = () => {
            const weeklyGrid = document.getElementById('weekly-grid');
            weeklyGrid.innerHTML = '';
            Object.keys(mealData).forEach(day => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card bg-gray-50 p-6 rounded-xl border-2 border-transparent hover:shadow-md transition-all duration-300 cursor-pointer';
                dayCard.dataset.day = day;

                let mealsHtml = mealData[day].meals.map(meal => `
                    <div class="meal-item flex justify-between items-center py-2 border-b border-gray-200 last:border-b-0" data-meal-name="${meal.name}">
                        <div>
                            <p class="font-semibold text-gray-700">${meal.name}</p>
                            <p class="text-xs text-gray-500">${meal.type}</p>
                        </div>
                        <p class="font-medium text-gray-600">${meal.calories} kcal</p>
                    </div>
                `).join('');

                dayCard.innerHTML = `
                    <h3 class="text-xl font-bold text-gray-800 mb-4">${day}</h3>
                    <div class="space-y-2">${mealsHtml}</div>
                `;
                weeklyGrid.appendChild(dayCard);
            });
            
            document.querySelectorAll('.day-card').forEach(card => {
                card.addEventListener('click', () => updateDashboard(card.dataset.day));
            });

            document.querySelectorAll('.meal-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    e.stopPropagation();
                    showMealModal(item.dataset.mealName);
                });
            });
        };

        const renderRecipes = () => {
            const recipeList = document.getElementById('recipe-list');
            recipeList.innerHTML = '';
            Object.entries(recipeNotes).forEach(([name, note]) => {
                const recipeItem = document.createElement('div');
                recipeItem.className = 'bg-gray-50 p-4 rounded-lg';
                recipeItem.innerHTML = `
                    <h3 class="font-bold text-lg text-gray-800">${name}</h3>
                    <p class="text-gray-600 mt-1">${note}</p>
                `;
                recipeList.appendChild(recipeItem);
            });
        };

        const showSection = (sectionId) => {
            ['plan-section', 'prep-section', 'recipes-section'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');

            document.querySelectorAll('.nav-button').forEach(btn => btn.classList.remove('active'));
            if (sectionId === 'plan-section') document.getElementById('nav-plan').classList.add('active');
            if (sectionId === 'prep-section') document.getElementById('nav-prep').classList.add('active');
            if (sectionId === 'recipes-section') document.getElementById('nav-recipes').classList.add('active');
        };

        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            renderWeeklyPlan();
            renderRecipes();
            updateDashboard('Monday');
            showSection('plan-section');

            document.getElementById('nav-plan').addEventListener('click', () => showSection('plan-section'));
            document.getElementById('nav-prep').addEventListener('click', () => showSection('prep-section'));
            document.getElementById('nav-recipes').addEventListener('click', () => showSection('recipes-section'));

            document.getElementById('modal-close').addEventListener('click', hideMealModal);
            document.getElementById('meal-modal').addEventListener('click', (e) => {
                if (e.target.id === 'meal-modal') {
                    hideMealModal();
                }
            });
        });
    </script>
</body>
</html>
